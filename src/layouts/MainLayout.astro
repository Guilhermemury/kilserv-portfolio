---
import { ClientRouter } from 'astro:transitions';
import '../styles/global.css';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';

interface Props {
    title: string;
    description?: string;
}

const { title, description = "Security Research & Portfolio" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    
    <link rel="icon" type="image/png" href="/favicon.png" />
    
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <title>{title} | KILSERV</title>
    
    <ClientRouter />
</head>
<body>
    <div class="scanlines"></div>

    <div class="layout-wrapper">
        <header>
            <Navigation />
        </header>
        
        <main>
            <slot />
        </main>
        
        <Footer />
    </div>
</body>
</html>

<style>
    .layout-wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }
    main { 
        flex: 1; 
        padding-top: 2rem; 
        position: relative;
        z-index: 1;
    }
</style>

<style is:global>
    /* --- 1. CRT SCANLINE EFFECT --- */
    .scanlines {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(
            to bottom,
            rgba(255,255,255,0),
            rgba(255,255,255,0) 50%,
            rgba(0,0,0,0.1) 50%,
            rgba(0,0,0,0.1)
        );
        background-size: 100% 4px;
        pointer-events: none;
        z-index: 9999;
        opacity: 0.6;
    }

    /* --- 2. GLOBAL STAGGERED RENDER ANIMATION --- */
    .terminal-line {
        opacity: 0;
        animation: renderLine 0.15s forwards;
    }
    
    /* Utilitários para aplicar atraso nas animações em qualquer página */
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    .delay-4 { animation-delay: 0.4s; }
    .delay-5 { animation-delay: 0.5s; }
    .delay-6 { animation-delay: 0.6s; }

    @keyframes renderLine {
        from { opacity: 0; transform: translateY(2px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* --- 3. GLOBAL CURSOR & BLINK --- */
    .cursor::after {
        content: '█';
        margin-left: 5px;
        animation: blink 1s step-end infinite;
    }
    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }
</style>